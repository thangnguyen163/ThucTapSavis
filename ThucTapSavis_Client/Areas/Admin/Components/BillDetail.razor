<style>
    /* CSS */
    .button-33 {
        background-color: #c2fbd7;
        border-radius: 100px;
        box-shadow: rgba(44, 187, 99, .2) 0 -25px 18px -14px inset,rgba(44, 187, 99, .15) 0 1px 2px,rgba(44, 187, 99, .15) 0 2px 4px,rgba(44, 187, 99, .15) 0 4px 8px,rgba(44, 187, 99, .15) 0 8px 16px,rgba(44, 187, 99, .15) 0 16px 32px;
        color: green;
        cursor: pointer;
        display: inline-block;
        font-family: CerebriSans-Regular,-apple-system,system-ui,Roboto,sans-serif;
        padding: 2px 20px;
        text-align: center;
        text-decoration: none;
        transition: all 250ms;
        border: 0;
        font-size: 16px;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
    }

        .button-33:hover {
            box-shadow: rgba(44,187,99,.35) 0 -25px 18px -14px inset,rgba(44,187,99,.25) 0 1px 2px,rgba(44,187,99,.25) 0 2px 4px,rgba(44,187,99,.25) 0 4px 8px,rgba(44,187,99,.25) 0 8px 16px,rgba(44,187,99,.25) 0 16px 32px;
            transform: scale(1.05) rotate(-1deg);
        }

    .button-34 {
        background-color: #D74C4C;
        border-radius: 100px;
        box-shadow: rgba(215,76,76, .2) 0 -25px 18px -14px inset,rgba(215,76,76, .15) 0 1px 2px,rgba(215,76,76, .15) 0 2px 4px,rgba(215,76,76, .15) 0 4px 8px,rgba(215,76,76, .15) 0 8px 16px,rgba(215,76,76, .15) 0 16px 32px;
        color: wheat;
        cursor: pointer;
        display: inline-block;
        font-family: CerebriSans-Regular,-apple-system,system-ui,Roboto,sans-serif;
        padding: 2px 20px;
        text-align: center;
        text-decoration: none;
        transition: all 250ms;
        border: 0;
        font-size: 16px;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
    }

        .button-34:hover {
            box-shadow: rgba(215,76,76,.35) 0 -25px 18px -14px inset,rgba(215,76,76,.25) 0 1px 2px,rgba(215,76,76,.25) 0 2px 4px,rgba(215,76,76,.25) 0 4px 8px,rgba(215,76,76,.25) 0 8px 16px,rgba(215,76,76,.25) 0 16px 32px;
            transform: scale(1.05) rotate(-1deg);
        }

    .cangiua {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center
    }

    .inputtext {
        appearance: none;
        border: none;
        outline: none;
        border-bottom: .1em solid #454545;
        background: rgba(#454545, .2);
        border-radius: .1em .1em 0 0;
        padding: 0px;
        color: #454545;
    }

    <!-- HTML ! -->
    /* CSS */
    .button-37 {
        background-color: #13aa52;
        border: 1px solid #13aa52;
        border-radius: 4px;
        box-shadow: rgba(0, 0, 0, .1) 0 2px 4px 0;
        box-sizing: border-box;
        color: #fff;
        cursor: pointer;
        font-family: "Akzidenz Grotesk BQ Medium", -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 16px;
        font-weight: 400;
        outline: none;
        outline: 0;
        padding: 10px 25px;
        text-align: center;
        transform: translateY(0);
        transition: transform 150ms, box-shadow 150ms;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
    }

    .button-37:hover {
        box-shadow: rgba(0, 0, 0, .15) 0 3px 9px 0;
        transform: translateY(-2px);
    }

    .abc {
        display: none;
    }

    .button_price {
        border: none;
        padding: 5px;
    }

    .btnSucces {
        padding: 10px 15px 10px 15px;
        width: 100px;
        border: 1px solid #D15555;
        border-radius: 25px;
        color: #D15555;
    }

        .btnSucces:hover {
            border: 1px solid #D15555;
            background-color: #D15555;
            border-radius: 25px;
            color: wheat;
        }

    .btnCancel {
        margin-left: 20px;
        padding: 10px 15px 10px 15px;
        width: 100px;
        border: 1px solid #797878;
        border-radius: 25px;
        color: #797878;
    }

        .btnCancel:hover {
            background-color: #797878;
            border: 1px solid #797878;
            border-radius: 25px;
            color: white;
        }

    .divCancelOrder {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 30px;
    }

    .TitleYesOrNo {
        display: flex;
        align-items: center;
        justify-content: center;
        color: #454545;
        font-size: 20px;
        align-items: center;
        font-weight: 500;
        margin-bottom: 30px;
    }
</style>

<div class="row">
    <div>
        <button @onclick="ReturnBill" style="border:none;border-radius:25px; padding:10px 25px 10px 25px; background-color:#fe9666;color:white"><i style="margin-right:15px" class="fa-solid fa-chevron-left"></i>Back</button>
    </div>
    <EditForm Model="_billModel" class="col-4">
        <div>
            <label for="inputText" class="col-form-label">Mã HD</label>
            <InputText class="form-control" @bind-Value="@_billModel.BillCode" readonly />
        </div>
        <div>
            <label for="inputText" class="col-form-label">Tên khách hàng</label>
            <InputText class="form-control" @bind-Value="@_billModel.UserName" readonly />
        </div>
        <div>
            <label for="inputText" class="col-form-label">Số điện thoại</label>
            <InputText class="form-control" @bind-Value="@_billModel.SDTNhan" readonly />
        </div>

    </EditForm>
    @{
        var dc = _billModel.DiaChiCuThe + "," + _billModel.Xa + "," + _billModel.Huyen + "," + _billModel.Tinh;
    }
    <EditForm Model="_billModel" class="col-4">
        <div>
            <label for="inputText" class="col-form-label">Địa chỉ</label>
            <InputText class="form-control " @bind-Value="@(dc)" readonly />
        </div>
        <div>
            <label for="inputText" class="col-form-label">Tên người nhận</label>
            <InputText class="form-control " @bind-Value="_billModel.TenNguoiNhan" readonly />
        </div>
        <div>
            <label for="inputText" class="col-form-label">Số điện thoại</label>
            <InputText class="form-control" @bind-Value="_billModel.SDTNhan" readonly />
        </div>
    </EditForm>
    <div class="col-2 cangiua">
        @if (_billModel.Status == 1)
        {
            <button class="button-33" data-bs-toggle="modal" data-bs-target="#ConfirmBill" style="margin-bottom:20px">
                Xác nhận đơn hàng
            </button>

            <button class="button-34" data-bs-toggle="modal" data-bs-target="#CancelBill" style="margin-bottom:20px">
                Hủy đơn hàng
            </button>
        }
        else
        {
            <div>
            </div>
        }
    </div>
</div>
@if (_lstBillDetail == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>STT</th>
                <th>Tên</th>
                <th>Thể loại</th>
                <th>Màu sắc</th>
                <th>Size</th>
                <th>Số lượng </th>
                <th>Giá khuyến mãi</th>
                <th>Tổng tiền</th>
                <th></th>
            </tr>
        </thead>
        @{
            int count = 1;
            //int tongtien = 0;
            //foreach (var x in _lstBillDetail)
            //{
            //    tongtien += (x.Quantity * x.PriceAfter);
            //};
        }
        <tbody>
            @foreach (var x in _lstBillDetail)
            {

                <tr>
                    <td>
                        @(count++)
                    </td>
                    <td>@x.Name</td>
                    <td>@x.CategoryName</td>
                    <td>@x.ColorName</td>
                    <td>@x.SizeName</td>
                    <td>@x.Quantity</td>

                    <td>@x.PriceAfter</td>
                    <td>@(x.Status == 1 ? "Còn hàng" : x.Status == 2 ? "Hết hàng" : "Ngừng kinh doanh")</td>
                    <td>@(x.Quantity * x.PriceAfter)</td>

                    <td>
                        <button style="border: none;border-radius: 15px;" class="btn btn-primary" type="button">
                            <i class="fa fa-info"></i>
                        </button>
                    </td>
                </tr>

            }
            <tr>
                <td colspan="8" style="text-align: center; font-weight:600">
                    Thành tiền
                </td>
                <td>@_tongtien?.ToString("#,##0") VND</td>
            </tr>

            <tr>
                <td colspan="8">
                    Số tiền viết bằng chữ : @texttongtien
                </td>

            </tr>

        </tbody>

    </table>

}
    <EditForm Model="_billModel">
<div class="modal fade" id="ConfirmBill" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thông báo</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn xác nhận đơn hàng
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" @onclick="()=>ConfirmBill(_billModel.Id)">Xác nhận</button>
            </div>
        </div>
    </div>
</div><!-- End Basic Modal-->



<div class="modal fade" id="CancelBill" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thông báo</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn huỷ đơn hàng
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" @onclick="()=>CancelBill(_billModel.Id)">Huỷ đơn hàng</button>
            </div>
        </div>
    </div>
</div><!-- End Basic Modal-->
</EditForm>

@using Blazored.Toast.Configuration

<BlazoredToasts Position="ToastPosition.TopRight"
                Timeout="5"
                IconType="IconType.FontAwesome"
                SuccessClass="success-toast-override"
                SuccessIcon="fas fa-check-circle"
                ErrorIcon="fa-solid fa-triangle-exclamation" />

<BlazoredToasts Position="ToastPosition.TopRight"
                Timeout="5"
                IconType="IconType.FontAwesome"
                SuccessClass="success-toast-override"
                SuccessIcon="fa-solid fa-check"
                ErrorIcon="fa-solid fa-triangle-exclamation" />

